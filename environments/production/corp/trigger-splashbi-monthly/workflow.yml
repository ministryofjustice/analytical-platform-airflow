---
dag:
  repository: moj-analytical-services/airflow-report-extractor
  tag: v1.12
  start_date: "2025-09-29"
  schedule: "0 7 1 * *"
  retries: 2
  retry_delay: 86400
  env_vars:
    REPORT_APP: "splashbi"
    REPORT_RUNTIME_ENV: "prod"
    REPORT_RUN_MODE: "trigger"
  tasks:
    # === Commercial Synergy GRNI ===
    po_sscl_details:
      env_vars:
        REPORT_NAME: "po_sscl_details"

    # === Commercial Synergy Supplier Headers ===
    cts-supplier_headers:
      env_vars:
        REPORT_NAME: "cts-supplier_headers"
    laa-supplier_headers:
      env_vars:
        REPORT_NAME: "laa-supplier_headers"
    opg-supplier_headers:
      env_vars:
        REPORT_NAME: "opg-supplier_headers"
    yjb-supplier_headers:
      env_vars:
        REPORT_NAME: "yjb-supplier_headers"
    ima-supplier_headers:
      env_vars:
        REPORT_NAME: "ima-supplier_headers"
    moj-supplier_headers:
      env_vars:
        REPORT_NAME: "moj-supplier_headers"
    pbd-supplier_headers:
      env_vars:
        REPORT_NAME: "pbd-supplier_headers"
    jac-supplier_headers:
      env_vars:
        REPORT_NAME: "jac-supplier_headers"
    nms-supplier_headers:
      env_vars:
        REPORT_NAME: "nms-supplier_headers"
    wls-supplier_headers:
      env_vars:
        REPORT_NAME: "wls-supplier_headers"

    # === Commercial Synergy Supplier Sites ===

    cts-supplier_sites:
      env_vars:
        REPORT_NAME: "cts-supplier_sites"
    jac-supplier_sites:
      env_vars:
        REPORT_NAME: "jac-supplier_sites"
    moj-supplier_sites:
      env_vars:
        REPORT_NAME: "moj-supplier_sites"
    opg-supplier_sites:
      env_vars:
        REPORT_NAME: "opg-supplier_sites"
    wls-supplier_sites:
      env_vars:
        REPORT_NAME: "wls-supplier_sites"
    ima-supplier_sites:
      env_vars:
        REPORT_NAME: "ima-supplier_sites"
    laa-supplier_sites:
      env_vars:
        REPORT_NAME: "laa-supplier_sites"
    nms-supplier_sites:
      env_vars:
        REPORT_NAME: "nms-supplier_sites"
    pbd-supplier_sites:
      env_vars:
        REPORT_NAME: "pbd-supplier_sites"
    yjb-supplier_sites:
      env_vars:
        REPORT_NAME: "yjb-supplier_sites"

    # === HR Locations ===
    sba-mo-locations:
      env_vars:
        REPORT_NAME: "sba-mo-locations"

    # === Commercial Synergy custome headers ===

    cts-customer_headers:
      env_vars:
        REPORT_NAME: "cts-customer_headers"
    laa-customer_headers:
      env_vars:
        REPORT_NAME: "laa-customer_headers"
    opg-customer_headers:
      env_vars:
        REPORT_NAME: "opg-customer_headers"
    yjb-customer_headers:
      env_vars:
        REPORT_NAME: "yjb-customer_headers"
    ima-customer_headers:
      env_vars:
        REPORT_NAME: "ima-customer_headers"
    moj-customer_headers:
      env_vars:
        REPORT_NAME: "moj-customer_headers"
    pbd-customer_headers:
      env_vars:
        REPORT_NAME: "pbd-customer_headers"
    jac-customer_headers:
      env_vars:
        REPORT_NAME: "jac-customer_headers"
    nms-customer_headers:
      env_vars:
        REPORT_NAME: "nms-customer_headers"
    wls-customer_headers:
      env_vars:
        REPORT_NAME: "wls-customer_headers"

    # === Commercial Synergy customer sites ===

    cts-customer_sites:
      env_vars:
        REPORT_NAME: "cts-customer_sites"
    laa-customer_sites:
      env_vars:
        REPORT_NAME: "laa-customer_sites"
    opg-customer_sites:
      env_vars:
        REPORT_NAME: "opg-customer_sites"
    yjb-customer_sites:
      env_vars:
        REPORT_NAME: "yjb-customer_sites"
    ima-customer_sites:
      env_vars:
        REPORT_NAME: "ima-customer_sites"
    moj-customer_sites:
      env_vars:
        REPORT_NAME: "moj-customer_sites"
    pbd-customer_sites:
      env_vars:
        REPORT_NAME: "pbd-customer_sites"
    jac-customer_sites:
      env_vars:
        REPORT_NAME: "jac-customer_sites"
    nms-customer_sites:
      env_vars:
        REPORT_NAME: "nms-customer_sites"
    wls-customer_sites:
      env_vars:
        REPORT_NAME: "wls-customer_sites"

    # === Commercial Synergy PO ===

    cts-po_lines:
      env_vars:
        REPORT_NAME: "cts-po_lines"
    laa-po_lines:
      env_vars:
        REPORT_NAME: "laa-po_lines"
    opg-po_lines:
      env_vars:
        REPORT_NAME: "opg-po_lines"
    yjb-po_lines:
      env_vars:
        REPORT_NAME: "yjb-po_lines"
    ima-po_lines:
      env_vars:
        REPORT_NAME: "ima-po_lines"
    moj-po_lines:
      env_vars:
        REPORT_NAME: "moj-po_lines"
    pbd-po_lines:
      env_vars:
        REPORT_NAME: "pbd-po_lines"
    jac-po_lines:
      env_vars:
        REPORT_NAME: "jac-po_lines"
    nms-po_lines:
      env_vars:
        REPORT_NAME: "nms-po_lines"
    wls-po_lines:
      env_vars:
        REPORT_NAME: "wls-po_lines"

    cts-po_headers:
      env_vars:
        REPORT_NAME: "cts-po_headers"
    laa-po_headers:
      env_vars:
        REPORT_NAME: "laa-po_headers"
    opg-po_headers:
      env_vars:
        REPORT_NAME: "opg-po_headers"
    yjb-po_headers:
      env_vars:
        REPORT_NAME: "yjb-po_headers"
    ima-po_headers:
      env_vars:
        REPORT_NAME: "ima-po_headers"
    moj-po_headers:
      env_vars:
        REPORT_NAME: "moj-po_headers"
    pbd-po_headers:
      env_vars:
        REPORT_NAME: "pbd-po_headers"
    jac-po_headers:
      env_vars:
        REPORT_NAME: "jac-po_headers"
    nms-po_headers:
      env_vars:
        REPORT_NAME: "nms-po_headers"
    wls-po_headers:
      env_vars:
        REPORT_NAME: "wls-po_headers"

    # === Commercial Synergy Invoice ===

    cts-invoice_lines:
      env_vars:
        REPORT_NAME: "cts-invoice_lines"
    laa-invoice_lines:
      env_vars:
        REPORT_NAME: "laa-invoice_lines"
    opg-invoice_lines:
      env_vars:
        REPORT_NAME: "opg-invoice_lines"
    yjb-invoice_lines:
      env_vars:
        REPORT_NAME: "yjb-invoice_lines"
    ima-invoice_lines:
      env_vars:
        REPORT_NAME: "ima-invoice_lines"
    moj-invoice_lines:
      env_vars:
        REPORT_NAME: "moj-invoice_lines"
    pbd-invoice_lines:
      env_vars:
        REPORT_NAME: "pbd-invoice_lines"
    jac-invoice_lines:
      env_vars:
        REPORT_NAME: "jac-invoice_lines"
    nms-invoice_lines:
      env_vars:
        REPORT_NAME: "nms-invoice_lines"
    wls-invoice_lines:
      env_vars:
        REPORT_NAME: "wls-invoice_lines"

    cts-invoice_headers:
      env_vars:
        REPORT_NAME: "cts-invoice_headers"
    laa-invoice_headers:
      env_vars:
        REPORT_NAME: "laa-invoice_headers"
    opg-invoice_headers:
      env_vars:
        REPORT_NAME: "opg-invoice_headers"
    yjb-invoice_headers:
      env_vars:
        REPORT_NAME: "yjb-invoice_headers"
    ima-invoice_headers:
      env_vars:
        REPORT_NAME: "ima-invoice_headers"
    moj-invoice_headers:
      env_vars:
        REPORT_NAME: "moj-invoice_headers"
    pbd-invoice_headers:
      env_vars:
        REPORT_NAME: "pbd-invoice_headers"
    jac-invoice_headers:
      env_vars:
        REPORT_NAME: "jac-invoice_headers"
    nms-invoice_headers:
      env_vars:
        REPORT_NAME: "nms-invoice_headers"
    wls-invoice_headers:
      env_vars:
        REPORT_NAME: "wls-invoice_headers"

iam:
  s3_read_write:
    - mojap-land/corporate/report_extractor_prod/splashbi/*

secrets:
  - splashbi-credentials

notifications:
  slack_channel: dmet-corp-notifications
  emails:
    - william.orr@justice.gov.uk
    - Supratik.Chowdhury@justice.gov.uk
    - mohammed.ahad1@justice.gov.uk

maintainers:
  - williamorrie
  - moj-supratikc
  - morezwan

tags:
  business_unit: Central Digital
  owner: supratik.chowdhury@justice.gov.uk
