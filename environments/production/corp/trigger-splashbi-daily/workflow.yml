---
dag:
  repository: moj-analytical-services/airflow-report-extractor
  tag: v1.0.3
  schedule: "0 7 * * 1-5"
  retries: 1
  retry_delay: 60
  env_vars:
    REPORT_APP: "splashbi"
    REPORT_RUNTIME_ENV: "prod"
    REPORT_RUN_MODE: "trigger"
  tasks:
    # === HR iExpenses Reports ===
    moj-iexp01:
      env_vars:
        REPORT_NAME: "moj-iexp01"
    laa-iexp01:
      env_vars:
        REPORT_NAME: "laa-iexp01"
    opg-iexp01:
      env_vars:
        REPORT_NAME: "opg-iexp01"
    cts-iexp01:
      env_vars:
        REPORT_NAME: "cts-iexp01"
    nms-iexp01:
      env_vars:
        REPORT_NAME: "nms-iexp01"

    # === HR Non Sickness Absence Reports ===
    cts-hr-a-01-nonsick:
      env_vars:
        REPORT_NAME: "cts-hr-a-01"
    laa-hr-a-01-nonsick:
      env_vars:
        REPORT_NAME: "laa-hr-a-01"
    nms-hr-a-01-nonsick:
      env_vars:
        REPORT_NAME: "nms-hr-a-01"
    opg-hr-a-01-nonsick:
      env_vars:
        REPORT_NAME: "opg-hr-a-01"
    moj-hr-a-01-nonsick:
      env_vars:
        REPORT_NAME: "moj-hr-a-01"
    moj-hr-a-04-nonsick:
      env_vars:
        REPORT_NAME: "moj-hr-a-04-nonsick"

    # === HR Sick Absence Reports ===
    moj-hr-a-04-sick:
      env_vars:
        REPORT_NAME: "moj-hr-a-04-sick"
    moj-hr-wf-60-sickleave:
      env_vars:
        REPORT_NAME: "moj-hr-wf-60"

    # === HR Staffing Reports ===
    moj-hr-wf-59-leavers:
      env_vars:
        REPORT_NAME: "moj-hr-wf-59"
    moj-hr-wf-62-sip:
      env_vars:
        REPORT_NAME: "moj-hr-wf-62"
    moj-hr-wf-64-starters:
      env_vars:
        REPORT_NAME: "moj-hr-wf-64"


iam:
  s3_read_write:
    - mojap-land/corporate/report_extractor_prod/splashbi/*

secrets:
  - splashbi-credentials

notifications:
  slack_channel: dmet-corp-notifications

  emails:
    - william.orr@justice.gov.uk
    - Supratik.Chowdhury@justice.gov.uk
    - laurence.droy@justice.gov.uk

maintainers:
  - williamorrie
  - moj-supratikc
  - ltd-pa

tags:
  business_unit: Central Digital
  owner: supratik.chowdhury@justice.gov.uk
