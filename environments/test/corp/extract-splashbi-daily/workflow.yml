---
dag:
  repository: moj-analytical-services/airflow-report-extractor
  tag: v1.6.0-test-3
  env_vars:
    REPORT_APP: "splashbi"
    REPORT_RUNTIME_ENV: "test"
    DISABLE_SCHEDULING: True
  tasks:
    cred-check-william:
      env_vars:
        REPORT_RUN_MODE: "check_credentials"
        REPORT_SECRET_ID: "sbi-user-williamorrie"
    # === HR iExpenses Reports ===
    moj-iexp01:
      dependencies: [cred-check-william]
      env_vars:
        REPORT_NAME: "moj-iexp01"
        REPORT_SECRET_ID: "sbi-user-williamorrie"
        REPORT_RUN_MODE: "extract"
    laa-iexp01:
      dependencies: [cred-check-william]
      env_vars:
        REPORT_NAME: "laa-iexp01"
        REPORT_SECRET_ID: "sbi-user-williamorrie"
        REPORT_RUN_MODE: "extract"

iam:
  s3_read_write:
    - mojap-land/corporate/report_extractor_test/splashbi/*

secrets:
  - sbi-user-williamorrie

notifications:
  slack_channel: dmet-corp-notifications

  emails:
    - william.orr@justice.gov.uk
    - Supratik.Chowdhury@justice.gov.uk

maintainers:
  - williamorrie
  - moj-supratikc
  - ltd-pa

tags:
  business_unit: Central Digital
  owner: supratik.chowdhury@justice.gov.uk
