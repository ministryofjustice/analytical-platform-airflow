---
name: Mark and Close Stale Pull Requests

on:
  schedule:
    - cron: "0 2 * * *" # Runs daily at 02:00 UTC
  workflow_dispatch:

permissions: {}

jobs:
  stale:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
    steps:
      - name: Mark 30 days stale Pull Requests and close after 7 days
        uses: actions/stale@b5d41d4e1d5dceea10e7104786b73624c18a190f # v10.2.0
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          stale-pr-message: "This Pull Request has been marked as stale because it has been open for over 30 days with no activity. It will be closed in 7 days if no further activity occurs."
          close-pr-message: "Closing this Pull Request due to inactivity. Feel free to reopen if needed."
          days-before-stale: 30
          days-before-close: 7
          stale-pr-label: "stale"
          exempt-issue-labels: "dependencies"
          exempt-draft-pr: true
          days-before-issue-stale: -1 # Disable issue processing
