{
  "version": 4,
  "terraform_version": "1.9.8",
  "serial": 78,
  "lineage": "f1e5dda3-40d3-14a1-0b00-0f9c66d580b8",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "session",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].session",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "042130406152",
            "arn": "arn:aws:sts::042130406152:assumed-role/AWSReservedSSO_AdministratorAccess_75c6567ee233c758/jacobwoffenden@digital.justice.gov.uk",
            "id": "042130406152",
            "user_id": "AROAQTTZK7MEGXPT7UTKB:jacobwoffenden@digital.justice.gov.uk"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_eks_cluster",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].analytical-platform-development-eu-west-1",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_config": [
              {
                "authentication_mode": "CONFIG_MAP",
                "bootstrap_cluster_creator_admin_permissions": true
              }
            ],
            "arn": "arn:aws:eks:eu-west-1:525294151996:cluster/development-aWrhyc0m",
            "certificate_authority": [
              {
                "data": "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeE1USXdOVEE1TkRReU5sb1hEVE14TVRJd016QTVORFF5Tmxvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBSnlICmZ2MStZR0ZGZUpKbGJGUVVuK2N1N0hSRWRiTldHUzVSZWNCNlE3YWprNnYrT2xoZ3lZR0FzeXBiR291LzRUNXUKM2JSUjJYS1lkZk9tSmNSMzBVMUNzNExFZWJrSXVndERBenBvdW8yZHBPd3liMjJSVndwRWgvd1dUL1ZFV2ZjUQpwVEhkVEQ2RWQ4NkNGWEd0akxrTFN2UWtPQ0IzUnR4anZPOFlvSVZIaXdMWW4yenJmdytoTW9RSHhQRnh3UDRZCmJyTFkzZzJxVFArMjV4dE5TcDBua1IwQnZUMEwzazVRUTNNQUZ3RzBSWmhvRlBpNlJ2VzRPYWc2OFhFeHJVTUcKRE1YUXlEL3NsWGhtbVR2cjd3MHVtQlBSeHdZbFUxdzlkZFp0NjRDVytTeEdGUlRyNm41U1ZPWStDUjlhR2NuSgo4SDFMQ3J5RENuNnlHSDVBSHhrQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZNZFowR083STNDdFNKbDFHczRuaGt6US81WXNNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFCSFNXK25OK01xeCtBT3R1aUhjQ3hEeXhvMU5VWXRtK29TaUthMm9kVEIrVTI4UFdOagpYUFMzamF4Nyt5K05MQ0psVENWcllxVHZhQit2V3pVV3lqVzBHZGN5K29TR3FWdTNvcXBuNDBVazkzWXRnRkZQCmIrRVdwbjZ4R1BodDVROGZ6ZE9adCtKbVQ5SElsYTVPSDJJejY5T2dtYjUvQU1YNW94ajlRZVFQVEh0Ym5DNDAKWlRRZHlXMTRQTXZwQmV1QnFQM3ZhZHRabHkvU1RLQnZzMk9qV3Y3WStNMXBtQWdFWHV4TTQ2Nzl6ZFpnbEdYegpFRm1mNTZlUmJLQXZyN3o3ZkpmV0dSNTRvdkpNZGJ0NFAxOWVxRm8vd05IRHNTK1ZuTVJ5azkxQUdBNmVwQWFDCjFyZVp5R3VUSnZuU0hxTzJ2VHBOdWhkWlo4RWtjSU03Vlk5KwotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg=="
              }
            ],
            "cluster_id": null,
            "created_at": "2021-12-05T09:38:00Z",
            "enabled_cluster_log_types": [
              "api",
              "audit",
              "authenticator",
              "controllerManager",
              "scheduler"
            ],
            "endpoint": "https://6F58D1C4FD8FAE6D3D9282A400EDCE79.gr7.eu-west-1.eks.amazonaws.com",
            "id": "development-aWrhyc0m",
            "identity": [
              {
                "oidc": [
                  {
                    "issuer": "https://oidc.eks.eu-west-1.amazonaws.com/id/6F58D1C4FD8FAE6D3D9282A400EDCE79"
                  }
                ]
              }
            ],
            "kubernetes_network_config": [
              {
                "ip_family": "ipv4",
                "service_ipv4_cidr": "172.20.0.0/16",
                "service_ipv6_cidr": ""
              }
            ],
            "name": "development-aWrhyc0m",
            "outpost_config": [],
            "platform_version": "eks.13",
            "role_arn": "arn:aws:iam::525294151996:role/development-aWrhyc0m20211205093757214400000002",
            "status": "ACTIVE",
            "tags": {
              "application": "Analytical Platform",
              "business-unit": "Platforms",
              "component": "tools",
              "environment": "development",
              "infrastructure-support": "analytical-platform:analytics-platform-tech@digital.justice.gov.uk",
              "is-production": "false",
              "owner": "analytical-platform:analytics-platform-tech@digital.justice.gov.uk",
              "source-code": "github.com/ministryofjustice/analytical-platform-infrastructure"
            },
            "upgrade_policy": [
              {
                "support_type": "EXTENDED"
              }
            ],
            "version": "1.29",
            "vpc_config": [
              {
                "cluster_security_group_id": "sg-018cddc6e02dd0f80",
                "endpoint_private_access": true,
                "endpoint_public_access": true,
                "public_access_cidrs": [
                  "0.0.0.0/0"
                ],
                "security_group_ids": [
                  "sg-0edccc56eb8bf4edc"
                ],
                "subnet_ids": [
                  "subnet-066c4a7efa57dc384",
                  "subnet-081df3de344c2299d",
                  "subnet-0d85cf3a4a3f262d2"
                ],
                "vpc_id": "vpc-007e49b135f4129e5"
              }
            ],
            "zonal_shift_config": []
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_iam_session_context",
      "name": "session",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"].session",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sts::042130406152:assumed-role/AWSReservedSSO_AdministratorAccess_75c6567ee233c758/jacobwoffenden@digital.justice.gov.uk",
            "id": "arn:aws:sts::042130406152:assumed-role/AWSReservedSSO_AdministratorAccess_75c6567ee233c758/jacobwoffenden@digital.justice.gov.uk",
            "issuer_arn": "arn:aws:iam::042130406152:role/aws-reserved/sso.amazonaws.com/eu-west-2/AWSReservedSSO_AdministratorAccess_75c6567ee233c758",
            "issuer_id": "AROAQTTZK7MEGXPT7UTKB",
            "issuer_name": "AWSReservedSSO_AdministratorAccess_75c6567ee233c758",
            "session_name": "jacobwoffenden@digital.justice.gov.uk"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_namespace",
      "name": "jacobwoffenden_test",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "jacobwoffenden-test",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {},
                "name": "jacobwoffenden-test",
                "resource_version": "796393585",
                "uid": "373b7662-8917-48be-b9b6-2d245aa8cca3"
              }
            ],
            "timeouts": null,
            "wait_for_default_service_account": false
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "data.aws_eks_cluster.main"
          ]
        }
      ]
    },
    {
      "module": "module.airflow[\"development/analytical-platform/example\"]",
      "mode": "managed",
      "type": "kubernetes_service_account",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "automount_service_account_token": true,
            "default_secret_name": "",
            "id": "jacobwoffenden-test/analytical-platform-example",
            "image_pull_secret": [],
            "metadata": [
              {
                "annotations": {
                  "eks.amazonaws.com/role-arn": "arn:aws:iam::123456789012:role/external-role"
                },
                "generate_name": "",
                "generation": 0,
                "labels": {
                  "airflow.compute.analytical-platform.service.justice.gov.uk/environment": "development",
                  "airflow.compute.analytical-platform.service.justice.gov.uk/project": "analytical-platform"
                },
                "name": "analytical-platform-example",
                "namespace": "jacobwoffenden-test",
                "resource_version": "796422378",
                "uid": "aeda31ed-e3c1-47bb-803f-55f90e3a463d"
              }
            ],
            "secret": [],
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMH19",
          "dependencies": [
            "data.aws_eks_cluster.main",
            "module.airflow.module.iam_role.aws_iam_role.this",
            "module.airflow.module.iam_role.data.aws_caller_identity.current",
            "module.airflow.module.iam_role.data.aws_iam_policy_document.assume_role",
            "module.airflow.module.iam_role.data.aws_iam_policy_document.assume_role_with_mfa",
            "module.airflow.module.iam_role.data.aws_partition.current"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
